{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function fetchImages(query, page = 1, perPage = 40) {\n    const API_KEY = '48567917-ad299c95fd5743fafa8b1579d';\n    const BASE_URL = 'https://pixabay.com/api/';\n    \n    const params = {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page,\n        per_page: perPage,\n    };\n\n    try {\n        const response = await axios.get(BASE_URL, { params });\n        return response.data;\n    } catch (error) {\n        console.error('Error fetching images:', error);\n        throw error;\n    }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery-item');\n    lightbox.refresh();\n\nexport function renderGallery(images, append = false) {\n    const gallery = document.querySelector('#gallery');\n\n    const markup = images\n        .map(\n            image => `\n        <a href=\"${image.largeImageURL}\" class=\"gallery-item\" data-lightbox=\"gallery\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n          <div class=\"info\">\n            <p> likes </br> ${image.likes}</p>\n            <p> views </br> ${image.views}</p>\n            <p> comments </br> ${image.comments}</p>\n            <p> downloads </br> ${image.downloads}</p>\n          </div>\n        </a>\n      `\n        )\n        .join('');\n\n    if (append) {\n        gallery.insertAdjacentHTML('beforeend', markup);\n    } else {\n        gallery.innerHTML = markup;\n    }\n\n}","import { fetchImages } from './js/pixabay-api.js';\nimport { renderGallery } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector('#search-form');\nconst gallery = document.querySelector('#gallery');\nconst loader = document.querySelector('#loader');\nconst loadMoreBtn = document.querySelector('#load-more');\n\nlet query = '';\nlet page = 1;\nconst perPage = 40;\nconst lightbox = new SimpleLightbox('.gallery a');\n\n\nloadMoreBtn.style.display = 'none';\n\nform.addEventListener('submit', async event => {\n    event.preventDefault();\n    query = event.target.elements.searchQuery.value.trim();\n    if (!query) {\n        iziToast.error({ message: 'Please enter a search query!' });\n        return;\n    }\n\n    page = 1;\n    gallery.innerHTML = '';\n    loadMoreBtn.style.display = 'none';\n    loader.classList.remove('hidden');\n\n    try {\n        const data = await fetchImages(query, page, perPage);\n        if (data.hits.length === 0) {\n            iziToast.warning({ message: 'Sorry, no images found. Try again!' });\n        } else {\n            renderGallery(data.hits);\n            lightbox.refresh();\n            if (data.totalHits > perPage) {\n                loadMoreBtn.style.display = 'block';\n            }\n        }\n    } catch (error) {\n        iziToast.error({ message: 'Error fetching images. Please try again later.' });\n    } finally {\n        loader.classList.add('hidden');\n    }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n    page += 1;\n    loader.classList.remove('hidden');\n\n    try {\n        const data = await fetchImages(query, page, perPage);\n        renderGallery(data.hits, true);\n        lightbox.refresh();\n        smoothScroll();\n\n        const maxPages = Math.ceil(data.totalHits / perPage);\n        if (page >= maxPages) {\n            loadMoreBtn.style.display = 'none';\n            iziToast.info({ message: \"We're sorry, but you've reached the end of search results.\" });\n        }\n    } catch (error) {\n        iziToast.error({ message: 'Error fetching images. Please try again later.' });\n    } finally {\n        loader.classList.add('hidden');\n    }\n});\n\nfunction smoothScroll() {\n    const cardHeight = document.querySelector('.gallery-item').getBoundingClientRect().height;\n    window.scrollBy({ top: cardHeight * 2, behavior: 'smooth' });\n}\n"],"names":["fetchImages","query","page","perPage","API_KEY","BASE_URL","params","axios","error","lightbox","SimpleLightbox","renderGallery","images","append","gallery","markup","image","form","loader","loadMoreBtn","event","iziToast","data","smoothScroll","maxPages","cardHeight"],"mappings":"+vBAEO,eAAeA,EAAYC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAC7D,MAAMC,EAAU,qCACVC,EAAW,2BAEXC,EAAS,CACX,IAAKF,EACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAUC,CAClB,EAEI,GAAI,CAEA,OADiB,MAAMI,EAAM,IAAIF,EAAU,CAAE,OAAAC,CAAM,CAAE,GACrC,IACnB,OAAQE,EAAO,CACZ,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACT,CACL,CCpBA,MAAMC,EAAW,IAAIC,EAAe,eAAe,EAC/CD,EAAS,QAAO,EAEb,SAASE,EAAcC,EAAQC,EAAS,GAAO,CAClD,MAAMC,EAAU,SAAS,cAAc,UAAU,EAE3CC,EAASH,EACV,IACGI,GAAS;AAAA,mBACFA,EAAM,aAAa;AAAA,sBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,8BAE9BA,EAAM,KAAK;AAAA,8BACXA,EAAM,KAAK;AAAA,iCACRA,EAAM,QAAQ;AAAA,kCACbA,EAAM,SAAS;AAAA;AAAA;AAAA,OAIxC,EACA,KAAK,EAAE,EAERH,EACAC,EAAQ,mBAAmB,YAAaC,CAAM,EAE9CD,EAAQ,UAAYC,CAG5B,CCxBA,MAAME,EAAO,SAAS,cAAc,cAAc,EAC5CH,EAAU,SAAS,cAAc,UAAU,EAC3CI,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,YAAY,EAEvD,IAAIlB,EAAQ,GACRC,EAAO,EACX,MAAMC,EAAU,GACVM,EAAW,IAAIC,EAAe,YAAY,EAGhDS,EAAY,MAAM,QAAU,OAE5BF,EAAK,iBAAiB,SAAU,MAAMG,GAAS,CAG3C,GAFAA,EAAM,eAAc,EACpBnB,EAAQmB,EAAM,OAAO,SAAS,YAAY,MAAM,OAC5C,CAACnB,EAAO,CACRoB,EAAS,MAAM,CAAE,QAAS,8BAAgC,CAAA,EAC1D,MACH,CAEDnB,EAAO,EACPY,EAAQ,UAAY,GACpBK,EAAY,MAAM,QAAU,OAC5BD,EAAO,UAAU,OAAO,QAAQ,EAEhC,GAAI,CACA,MAAMI,EAAO,MAAMtB,EAAYC,EAAOC,EAAMC,CAAO,EAC/CmB,EAAK,KAAK,SAAW,EACrBD,EAAS,QAAQ,CAAE,QAAS,oCAAsC,CAAA,GAElEV,EAAcW,EAAK,IAAI,EACvBb,EAAS,QAAO,EACZa,EAAK,UAAYnB,IACjBgB,EAAY,MAAM,QAAU,SAGvC,MAAe,CACZE,EAAS,MAAM,CAAE,QAAS,gDAAkD,CAAA,CACpF,QAAc,CACNH,EAAO,UAAU,IAAI,QAAQ,CAChC,CACL,CAAC,EAEDC,EAAY,iBAAiB,QAAS,SAAY,CAC9CjB,GAAQ,EACRgB,EAAO,UAAU,OAAO,QAAQ,EAEhC,GAAI,CACA,MAAMI,EAAO,MAAMtB,EAAYC,EAAOC,EAAMC,CAAO,EACnDQ,EAAcW,EAAK,KAAM,EAAI,EAC7Bb,EAAS,QAAO,EAChBc,IAEA,MAAMC,EAAW,KAAK,KAAKF,EAAK,UAAYnB,CAAO,EAC/CD,GAAQsB,IACRL,EAAY,MAAM,QAAU,OAC5BE,EAAS,KAAK,CAAE,QAAS,4DAA8D,CAAA,EAE9F,MAAe,CACZA,EAAS,MAAM,CAAE,QAAS,gDAAkD,CAAA,CACpF,QAAc,CACNH,EAAO,UAAU,IAAI,QAAQ,CAChC,CACL,CAAC,EAED,SAASK,GAAe,CACpB,MAAME,EAAa,SAAS,cAAc,eAAe,EAAE,sBAAuB,EAAC,OACnF,OAAO,SAAS,CAAE,IAAKA,EAAa,EAAG,SAAU,QAAQ,CAAE,CAC/D"}